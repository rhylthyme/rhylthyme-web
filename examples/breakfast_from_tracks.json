{
  "programId": "breakfast-from-tracks",
  "name": "Breakfast Program (Built from Track Library)",
  "description": "Example breakfast program built using tracks from the cooking track library",
  "version": "1.0.0",
  "environmentType": "kitchen",
  "startTrigger": {
    "type": "manual"
  },
  "metadata": {
    "source": "Composed from tracks/cooking_tracks.json",
    "tracks_used": [
      "scrambled-eggs",
      "bacon",
      "toast"
    ],
    "customizations": [
      "Adjusted toast timing",
      "Modified egg portions"
    ]
  },
  "tracks": [
    {
      "trackId": "scrambled-eggs",
      "name": "Scrambled Eggs (4 servings)",
      "description": "Prepare scrambled eggs from crack to plate - customized for 4 servings",
      "metadata": {
        "source_track": "cooking_tracks.json:scrambled-eggs",
        "parameters": {
          "servings": 4,
          "cook_style": "medium"
        }
      },
      "steps": [
        {
          "stepId": "eggs-crack-whisk",
          "name": "Crack and Whisk Eggs",
          "description": "Crack 8 eggs into a bowl and whisk with salt and pepper",
          "startTrigger": {
            "type": "programStart"
          },
          "duration": {
            "type": "fixed",
            "seconds": 90
          },
          "preBuffer": {
            "duration": "30s",
            "description": "Gather ingredients and utensils",
            "tasks": [
              "prep-work"
            ]
          },
          "postBuffer": {
            "duration": "15s",
            "description": "Clean up egg shells and wipe counter",
            "tasks": [
              "cleanup"
            ]
          },
          "task": "prep-work"
        },
        {
          "stepId": "eggs-heat-pan",
          "name": "Heat Pan",
          "description": "Place large pan on stove and heat to medium",
          "startTrigger": {
            "type": "afterStep",
            "stepId": "eggs-crack-whisk"
          },
          "duration": {
            "type": "variable",
            "minSeconds": 60,
            "maxSeconds": 120,
            "defaultSeconds": 90,
            "triggerName": "pan-ready"
          },
          "task": "stove-burner",
          "preBuffer": {
            "duration": "20s",
            "description": "Get large pan from cupboard and add oil",
            "tasks": [
              "prep-work"
            ]
          }
        },
        {
          "stepId": "eggs-cook",
          "name": "Cook Eggs",
          "description": "Pour eggs into pan and cook until medium doneness",
          "startTrigger": {
            "type": "afterStep",
            "stepId": "eggs-heat-pan"
          },
          "duration": {
            "type": "variable",
            "minSeconds": 150,
            "maxSeconds": 210,
            "defaultSeconds": 180,
            "triggerName": "eggs-done"
          },
          "task": "stove-burner",
          "postBuffer": {
            "duration": "30s",
            "description": "Turn off heat and plate the eggs",
            "tasks": [
              "plating"
            ]
          }
        }
      ]
    },
    {
      "trackId": "bacon",
      "name": "Crispy Bacon",
      "description": "Cook bacon strips to crispy perfection",
      "metadata": {
        "source_track": "cooking_tracks.json:bacon",
        "parameters": {
          "strips": 8,
          "crispiness": "crispy"
        }
      },
      "steps": [
        {
          "stepId": "bacon-prep",
          "name": "Prepare Bacon",
          "description": "Place 8 bacon strips in cold pan",
          "startTrigger": {
            "type": "programStart"
          },
          "duration": {
            "type": "fixed",
            "seconds": 90
          },
          "preBuffer": {
            "duration": "45s",
            "description": "Get bacon from fridge and arrange strips",
            "tasks": [
              "prep-work"
            ]
          },
          "task": "prep-work"
        },
        {
          "stepId": "bacon-cook",
          "name": "Cook Bacon",
          "description": "Cook bacon, flipping occasionally until crispy",
          "startTrigger": {
            "type": "afterStep",
            "stepId": "bacon-prep"
          },
          "duration": {
            "type": "variable",
            "minSeconds": 480,
            "maxSeconds": 720,
            "defaultSeconds": 600,
            "triggerName": "bacon-done"
          },
          "task": "stove-burner",
          "postBuffer": {
            "duration": "60s",
            "description": "Drain on paper towels and clean grease",
            "tasks": [
              "cleanup",
              "plating"
            ]
          }
        }
      ]
    },
    {
      "trackId": "toast",
      "name": "Buttered Toast",
      "description": "Make toast with butter - timed to finish with eggs",
      "metadata": {
        "source_track": "cooking_tracks.json:toast",
        "parameters": {
          "slices": 4,
          "browning": "medium",
          "butter": true
        },
        "timing_note": "Started with offset to coordinate with egg completion"
      },
      "steps": [
        {
          "stepId": "toast-cook",
          "name": "Make Toast",
          "description": "Place 4 bread slices in toaster and toast until golden brown",
          "startTrigger": {
            "type": "programStartOffset",
            "offsetSeconds": 300
          },
          "duration": {
            "type": "fixed",
            "seconds": 210
          },
          "preBuffer": {
            "duration": "15s",
            "description": "Get bread and check toaster settings",
            "tasks": [
              "prep-work"
            ]
          },
          "postBuffer": {
            "duration": "20s",
            "description": "Butter toast and plate with other items",
            "tasks": [
              "plating"
            ]
          },
          "task": "prep-work"
        }
      ]
    }
  ],
  "resourceConstraints": [
    {
      "task": "stove-burner",
      "maxConcurrent": 4,
      "description": "Stove burner usage"
    },
    {
      "task": "prep-work",
      "maxConcurrent": 2,
      "description": "Preparation work"
    },
    {
      "task": "cleanup",
      "maxConcurrent": 1,
      "description": "Cleanup operations"
    },
    {
      "task": "plating",
      "maxConcurrent": 2,
      "description": "Plating and presentation"
    }
  ]
}